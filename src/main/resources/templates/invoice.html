<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>H√≥a ƒê∆°n - Shop C√¢y C·∫£nh</title>
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

<header>
    <div class="header-flex">
        <span class="shop-title">Little</span>
        <img src="/images/leaf.png" alt="leaf logo" class="logo-img" />
        <form class="search-form" onsubmit="handleSearch(event)">
            <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm" />
            <button type="submit" aria-label="T√¨m ki·∫øm">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <circle cx="9" cy="9" r="7" stroke="#fff" stroke-width="2" />
                    <line x1="14.2" y1="14.2" x2="18" y2="18" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
        </form>
    </div>
</header>

<nav class="nav">
    <a href="/">Trang Ch·ªß</a>
    <a href="/invoice">H√≥a ƒê∆°n</a>
    <a href="/cart" class="active">Gi·ªè H√†ng</a>
    <a href="/contact">Li√™n H·ªá</a>
    <div class="nav-user" th:if="${user != null}">
        <span class="user-id" th:text="${user.UserName}">T√™n ng∆∞·ªùi d√πng</span>
        <form class="formlogout" action="/logout" method="post">
            <button type="submit" class="logout-btn">ƒêƒÉng xu·∫•t</button>
        </form>
    </div>
</nav>

<main class="container">
    <h2 class="section-title">üßæ H√≥a ƒê∆°n C·ªßa B·∫°n</h2>

    <div style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <p><strong>M√£ H√≥a ƒê∆°n:</strong> HD001</p>
        <p><strong>Kh√°ch H√†ng:</strong> Nguy·ªÖn VƒÉn A</p>
        <p><strong>Ng√†y:</strong> 01/08/2025</p>
        <p><strong>T·ªïng ti·ªÅn:</strong> <span id="totalPrice" style="color: #2e7d32;">0 VNƒê</span></p>
    </div>

    <div id="invoiceItems" class="products"></div>
</main>

<footer>
    ¬© 2025 Shop C√¢y C·∫£nh. ƒê√£ ƒëƒÉng k√Ω b·∫£n quy·ªÅn.
</footer>

<script>
    let invoice = [
        {
            ProductName: "C√¢y L∆∞·ª°i H·ªï",
            ProductPrice: 150000,
            ProductAmount: 1,
            ProductImage: "/images/cay1.jpg"
        },
        {
            ProductName: "C√¢y Tr·∫ßu B√†",
            ProductPrice: 120000,
            ProductAmount: 2,
            ProductImage: "/images/cay2.jpg"
        }
    ];

    function renderInvoice() {
        const container = document.getElementById("invoiceItems");
        container.innerHTML = "";

        if (invoice.length === 0) {
            container.innerHTML = "<p>H√≥a ƒë∆°n r·ªóng.</p>";
            document.getElementById("totalPrice").innerText = "0 VNƒê";
            return;
        }

        let total = 0;

        invoice.forEach(item => {
            const card = document.createElement("div");
            card.className = "product-card";
            const itemTotal = item.ProductPrice * item.ProductAmount;
            total += itemTotal;

            card.innerHTML = `
        <img src="${item.ProductImage}" alt="S·∫£n ph·∫©m">
        <h3>${item.ProductName}</h3>
        <p><strong>Gi√°:</strong> ${item.ProductPrice.toLocaleString('vi-VN')} VNƒê</p>
        <p><strong>S·ªë l∆∞·ª£ng:</strong> ${item.ProductAmount}</p>
        <p><strong>Th√†nh ti·ªÅn:</strong> ${itemTotal.toLocaleString('vi-VN')} VNƒê</p>
      `;

            container.appendChild(card);
        });

        document.getElementById("totalPrice").innerText = `${total.toLocaleString('vi-VN')} VNƒê`;
    }

    function handleSearch(event) {
        event.preventDefault();
        const keyword = document.getElementById("searchInput").value.toLowerCase();
        alert("Ch·ª©c nƒÉng t√¨m ki·∫øm kh√¥ng kh·∫£ d·ª•ng trong trang h√≥a ƒë∆°n.");
    }

    window.addEventListener("DOMContentLoaded", renderInvoice);
</script>

</body>
</html>
